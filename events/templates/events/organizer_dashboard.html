{% extends "events/dashboard_base.html" %}

{% block sidebar %}
  <h6 class="text-uppercase mb-3 dashboard-sidebar-title">Organizer</h6>
  <ul class="nav flex-column gap-2 dashboard-sidebar-nav">
    <li class="nav-item">
      <a class="nav-link text-white p-0" href="{% url 'events:organizer_dashboard' %}">
        Dashboard
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link sidebar-pill-link" href="{% url 'events:organizer_events' %}">
        My events
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link sidebar-pill-link" href="{% url 'events:event_create' %}">
        Create event
      </a>
    </li>
    <li class="nav-item mt-3">
      <span class="nav-link text-white p-0">Profile</span>
    </li>
    <li class="nav-item">
      <a class="nav-link sidebar-pill-link" href="{% url 'events:organizer_profile' %}">
        Edit profile
      </a>
    </li>
  </ul>
{% endblock %}

{% block main_content %}
  <h5 class="mb-3 dashboard-title">Organizer Dashboard</h5>

  <div class="row g-3 mb-3">
    <div class="col-md-3">
      <div class="card p-3 stat-card">
        <div class="stat-label">My events</div>
        <div class="stat-value">{{ total_events }}</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card p-3 stat-card">
        <div class="stat-label">Upcoming approved</div>
        <div class="stat-value">{{ upcoming }}</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card p-3 stat-card">
        <div class="stat-label">Pending review</div>
        <div class="stat-value">{{ pending }}</div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card p-3 stat-card">
        <div class="stat-label">Declined</div>
        <div class="stat-value">{{ declined }}</div>
      </div>
    </div>
  </div>

  <div class="row g-3">
    <div class="col-md-6">
      <div class="card p-3 h-100 panel-card">
        <div class="stat-label">Total participants across my events</div>
        <div class="stat-value">{{ total_participants }}</div>

        <div class="stat-label">Total feedback received</div>
        <div class="stat-value">{{ total_feedback }}</div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card p-3 h-100 panel-card">
        <h6 class="panel-title">Upcoming events</h6>
        {% if upcoming_list %}
          <ul class="list-group list-group-flush mt-2 panel-list">
            {% for e in upcoming_list %}
              <li class="list-group-item px-0">
                <strong>{{ e.title }}</strong>
                <span class="text-muted small">â€“ {{ e.date|date:"M d, Y" }}</span>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="text-muted mt-2">No upcoming events scheduled.</p>
        {% endif %}
      </div>
    </div>
  </div>
{% endblock %}